<!DOCTYPE html><html lang="zh-cn" class="__variable_587f35 scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/2d141e1a38819612-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/a6881ad4d2c479bd.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c1c99bc127b9f571.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-1df20324b005979d.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-4da009925c25e8df.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-7c63245aa9128ec5.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-36f60d3a9abe7fad.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-2c92a8b3297abe92.js" async=""></script><script src="/_next/static/chunks/449-dbe3acf9b229b2b6.js" async=""></script><script src="/_next/static/chunks/app/layout-223665e243f1bf19.js" async=""></script><script src="/_next/static/chunks/5f069060-c93cfff76369d40c.js" async=""></script><script src="/_next/static/chunks/749-03187734929ca4f1.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-8014ed172e446fa6.js" async=""></script><link rel="preload" href="https://analytics.umami.is/script.js" as="script"/><title>搭建Mongodb集群 | akamiiya的程序员之路</title><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://tailwind-nextjs-starter-blog.vercel.app/blog/2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4"/><link rel="alternate" type="application/rss+xml" href="https://tailwind-nextjs-starter-blog.vercel.app/feed.xml"/><meta property="og:title" content="搭建Mongodb集群"/><meta property="og:url" content="https://tailwind-nextjs-starter-blog.vercel.app/blog/2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4"/><meta property="og:site_name" content="akamiiya的程序员之路"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://tailwind-nextjs-starter-blog.vercel.app/static/images/twitter-card.png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-03-11T00:00:00.000Z"/><meta property="article:modified_time" content="2020-03-11T00:00:00.000Z"/><meta property="article:author" content="Zhlai"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="搭建Mongodb集群"/><meta name="twitter:image" content="https://tailwind-nextjs-starter-blog.vercel.app/static/images/twitter-card.png"/><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-950 dark:text-white"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="akamiiya的程序员之路" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="53.87" height="43.61" viewBox="344.564 330.278 111.737 91.218"><defs><linearGradient id="logo_svg__b" x1="420.97" x2="420.97" y1="331.28" y2="418.5" gradientUnits="userSpaceOnUse"><stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1"></stop><stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1"></stop></linearGradient><linearGradient id="logo_svg__d" x1="377.89" x2="377.89" y1="331.28" y2="418.5" gradientUnits="userSpaceOnUse"><stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1"></stop><stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1"></stop></linearGradient><path id="logo_svg__a" d="M453.3 331.28v28.57l-64.66 58.65v-30.08z"></path><path id="logo_svg__c" d="M410.23 331.28v28.57l-64.67 58.65v-30.08z"></path></defs><use xlink:href="#logo_svg__a" fill="url(#logo_svg__b)"></use><use xlink:href="#logo_svg__c" fill="url(#logo_svg__d)"></use></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">akamiiya的程序员之路</div></div></a></div><div class="flex items-center space-x-4 leading-5 sm:space-x-6"><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/blog">博客</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/projects">工具</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/tags">标签</a><button aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-gray-900 dark:text-gray-100"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><button aria-label="Toggle Menu" class="sm:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-8 w-8 text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-10 h-full w-full transform bg-white opacity-95 duration-300 ease-in-out dark:bg-gray-950 dark:opacity-[0.98] translate-x-full"><div class="flex justify-end"><button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/">主页</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">博客</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">工具</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">标签</a></div></nav></div></div></header><main class="mb-auto"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"搭建Mongodb集群","datePublished":"2020-03-11T00:00:00.000Z","dateModified":"2020-03-11T00:00:00.000Z","image":"/static/images/twitter-card.png","url":"https://tailwind-nextjs-starter-blog.vercel.app/blog/2020-03-11-搭建Mongodb集群","author":[{"@type":"Person","name":"Zhlai"}]}</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2020-03-11T00:00:00.000Z">2020年3月11日星期三</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">搭建Mongodb集群</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Zhlai</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/Twitter" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@Twitter</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pb-8 pt-10 dark:prose-invert"><p>之前尝试过用 docker 搭建单机版的 mongodb.但是.单机版的 mongo 有个问题,不支持事务.</p><p>目前 mongodb 4.0 已经支持副本集级别的事务了.</p><p>为了让测试环境的 Mongo 和生产环境的功能保持一致.我决定尝试使用 docker 搭建一个一主两从的高可用的 mongo 复制集.</p><p>在这里把搭建过程记录下来.</p><h1 id="搭建过程"><a href="#搭建过程" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>搭建过程</h1><h5 id="使用-keyfile-的访问控制方式部署复制集"><a href="#使用-keyfile-的访问控制方式部署复制集" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用 keyfile 的访问控制方式部署复制集</h5><p>keyfile 是 mongo 复制集 集群内部的一种认证机制.为了连接到复制集,成员需要对 keyfile 进行认证.</p><p>不使用验证也可以搭建集群~ 但是连带登录密码也不能使用,出于安全性考虑不推荐这么干.</p><p>Keyfiles 是安全的最小格式,非常适合测试和开发环境。对于生产环境,官方推荐使用<code>x.509 certificates</code>.</p><h5 id="生成-keyfile"><a href="#生成-keyfile" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>生成 keyfile</h5><ul><li>生成 keyfile 并修改权限</li></ul><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">openssl rand <span class="token parameter variable">-base64</span> <span class="token number">756</span> <span class="token operator">&gt;</span> ~/mongo-cluster/mongodbKeyfile.key
</span><span class="code-line"><span class="token function">chmod</span> <span class="token number">400</span> ~/mongo-cluster/mongodbKeyfile.key
</span></code></pre></div><h5 id="创建共有配置文件-mongodconf"><a href="#创建共有配置文件-mongodconf" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>创建共有配置文件 mongod.conf</h5><ul><li><p>生成<code>mongod.conf </code>配置并修改权限</p></li><li><p>容器内部端口 27017,keyfile 路径为容器内<code>/data/configdb/mongodbKeyfile.key</code>,复制集名称为<code>replset0</code></p></li></ul><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cat<span class="token operator">&gt;</span>~/mongo-cluster/mongod.conf<span class="token operator">&lt;&lt;</span><span class="token string">EOF
</span></span><span class="code-line"><span class="token string">net:
</span></span><span class="code-line"><span class="token string">  port: 27017
</span></span><span class="code-line"><span class="token string">  bindIp: 0.0.0.0
</span></span><span class="code-line"><span class="token string">  bindIpAll: true
</span></span><span class="code-line"><span class="token string">systemLog:
</span></span><span class="code-line"><span class="token string">  logAppend: true
</span></span><span class="code-line"><span class="token string">security:
</span></span><span class="code-line"><span class="token string">  keyFile: &quot;/data/configdb/mongodbKeyfile.key&quot;
</span></span><span class="code-line"><span class="token string">  authorization: &quot;enabled&quot;
</span></span><span class="code-line"><span class="token string">setParameter:
</span></span><span class="code-line"><span class="token string">  enableLocalhostAuthBypass: true
</span></span><span class="code-line"><span class="token string">replication:
</span></span><span class="code-line"><span class="token string">  replSetName: &quot;replset0&quot;
</span></span><span class="code-line"><span class="token string">EOF</span>
</span><span class="code-line"><span class="token function">chmod</span> <span class="token number">400</span> ~/mongo-cluster/mongod.conf
</span></code></pre></div><h5 id="创建自定义网络"><a href="#创建自定义网络" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>创建自定义网络</h5><ul><li>创建名为<code>mongo-network</code>的自定义网络,用于部署 docker 集群</li></ul><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> network create <span class="token punctuation">\</span>
</span><span class="code-line">  <span class="token parameter variable">--driver</span><span class="token operator">=</span>bridge <span class="token punctuation">\</span>
</span><span class="code-line">  <span class="token parameter variable">--subnet</span><span class="token operator">=</span><span class="token number">172.28</span>.0.0/16 <span class="token punctuation">\</span>
</span><span class="code-line">  --ip-range<span class="token operator">=</span><span class="token number">172.28</span>.5.0/24 <span class="token punctuation">\</span>
</span><span class="code-line">  <span class="token parameter variable">--gateway</span><span class="token operator">=</span><span class="token number">172.28</span>.5.254 <span class="token punctuation">\</span>
</span><span class="code-line">  mongo-network
</span></code></pre></div><h5 id="启动副本集容器"><a href="#启动副本集容器" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>启动副本集容器</h5><h6 id="启动主服务器"><a href="#启动主服务器" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>启动主服务器</h6><p>命令解释 :</p><ul><li><p>创建了名为<code>m0</code>的 docker 容器,并且把容器端口<code>27107</code>映射到宿主机<code>47107</code></p></li><li><p>加入自定义网络<code>mongo-network</code>,并且绑定 ip<code>172.28.5.100</code></p></li><li><p>挂载数据卷,将宿主的<code>~/mongo-cluster/data0</code>,<code>mongod.conf</code>和<code>mongodbKeyfile.key</code>挂载到容器内部.</p></li><li><p>创建用户名=<code>root</code>,密码=<code>123</code>的管理员.然后为 mongo 启用权限控制.</p></li></ul><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> m0 <span class="token parameter variable">-p</span> <span class="token number">47017</span>:27017 <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">--network</span> mongo-network <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">--ip</span> <span class="token number">172.28</span>.5.100 <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/data0:/data/db <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/mongod.conf:/data/configdb/mongod.conf <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/mongodbKeyfile.key:/data/configdb/mongodbKeyfile.key <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-d</span> mongo <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;mongod --fork --syslog &amp;&amp;mongo admin --eval <span class="token entity" title="\&quot;">\&quot;</span>db.createUser({user: &#x27;root&#x27;, pwd: &#x27;123&#x27;, roles: [{ role: &#x27;root&#x27;, db: &#x27;admin&#x27; }]})<span class="token entity" title="\&quot;">\&quot;</span> &amp;&amp; mongod --shutdown &amp;&amp; mongod --auth -f /data/configdb/mongod.conf &quot;</span>  <span class="token punctuation">\</span>
</span></code></pre></div><h6 id="启动复制集-1"><a href="#启动复制集-1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>启动复制集 1</h6><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> m1 <span class="token parameter variable">-p</span> <span class="token number">47018</span>:27017 <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">--network</span> mongo-network <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">--ip</span> <span class="token number">172.28</span>.5.101 <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/data1:/data/db <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/mongod.conf:/data/configdb/mongod.conf <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/mongodbKeyfile.key:/data/configdb/mongodbKeyfile.key <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-d</span> mongo <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;mongod --fork --syslog &amp;&amp;mongo admin --eval <span class="token entity" title="\&quot;">\&quot;</span>db.createUser({user: &#x27;root&#x27;, pwd: &#x27;123&#x27;, roles: [{ role: &#x27;root&#x27;, db: &#x27;admin&#x27; }]})<span class="token entity" title="\&quot;">\&quot;</span> &amp;&amp; mongod --shutdown &amp;&amp; mongod --auth -f /data/configdb/mongod.conf &quot;</span>  <span class="token punctuation">\</span>
</span></code></pre></div><h6 id="启动复制集-2"><a href="#启动复制集-2" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>启动复制集 2</h6><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> m2 <span class="token parameter variable">-p</span> <span class="token number">47019</span>:27017 <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">--network</span> mongo-network <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">--ip</span> <span class="token number">172.28</span>.5.102 <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/data2:/data/db <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/mongod.conf:/data/configdb/mongod.conf <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-v</span> ~/mongo-cluster/mongodbKeyfile.key:/data/configdb/mongodbKeyfile.key <span class="token punctuation">\</span>
</span><span class="code-line"><span class="token parameter variable">-d</span> mongo <span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;mongod --fork --syslog &amp;&amp;mongo admin --eval <span class="token entity" title="\&quot;">\&quot;</span>db.createUser({user: &#x27;root&#x27;, pwd: &#x27;123&#x27;, roles: [{ role: &#x27;root&#x27;, db: &#x27;admin&#x27; }]})<span class="token entity" title="\&quot;">\&quot;</span> &amp;&amp; mongod --shutdown &amp;&amp; mongod --auth -f /data/configdb/mongod.conf &quot;</span>  <span class="token punctuation">\</span>
</span></code></pre></div><p>这里有两个需要注意的点:</p><ul><li><p>副本集服务器的管理员密码一定要和主服务器保持一致.否则会出现认证失败.</p></li><li><p>端口映射命令<code>-p 47019:27017</code>会绕过操作系统防火墙直接通过 iptables 开放端口.这是一个很大的坑.</p><p>如果只在本机访问可以用命令<code>-p 127.0.0.1:47019:27017</code>代替.</p></li></ul><h5 id="初始化集群"><a href="#初始化集群" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>初始化集群</h5><h6 id="主服务器"><a href="#主服务器" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>主服务器</h6><ul><li><p>通过 Mongo shell 登录<code>admin</code>库</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> m0 mongo admin
</span><span class="code-line"><span class="token comment">#使用启动容器时设定的账号密码进行认证</span>
</span><span class="code-line">db.auth<span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span>,<span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">#认证成功</span>
</span><span class="code-line"><span class="token number">1</span>
</span></code></pre></div></li><li><p>初始化集群配置</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">config <span class="token operator">=</span> <span class="token punctuation">{</span> _id:<span class="token string">&quot;replset0&quot;</span>, members:<span class="token punctuation">[</span><span class="token punctuation">{</span>_id:0,host:<span class="token string">&quot;172.28.5.100:27017&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>_id:1,host:<span class="token string">&quot;172.28.5.101:27017&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>_id:2,host:<span class="token string">&quot;172.28.5.102:27017&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</span><span class="code-line">rs.initiate<span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">#初始化成功</span>
</span><span class="code-line"><span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</span><span class="code-line">
</span></code></pre></div></li></ul><h6 id="复制集服务器"><a href="#复制集服务器" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>复制集服务器</h6><ul><li><p>退出主服务器,登录复制集服务器,进行初始化操作</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line">#初始化复制集<span class="token number">1</span>
</span><span class="code-line">docker exec <span class="token operator">-</span>it m1 mongo admin
</span><span class="code-line">#使用启动容器时设定的账号密码进行认证
</span><span class="code-line">db<span class="token punctuation">.</span><span class="token function property-access method">auth</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">#认证成功
</span><span class="code-line"><span class="token number">1</span>
</span><span class="code-line">#默认情况下复制集是不允许访问的<span class="token punctuation">.</span><span class="token property-access">开启访问功能</span>
</span><span class="code-line">rs<span class="token punctuation">.</span><span class="token function property-access method">slaveOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">#退出复制集<span class="token number">1</span>
</span><span class="code-line">#初始化复制集<span class="token number">2</span>
</span><span class="code-line">docker exec <span class="token operator">-</span>it m2 mongo admin
</span><span class="code-line">#使用启动容器时设定的账号密码进行认证
</span><span class="code-line">db<span class="token punctuation">.</span><span class="token function property-access method">auth</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">#认证成功
</span><span class="code-line">#默认情况下复制集是不允许访问的<span class="token punctuation">.</span><span class="token property-access">开启访问功能</span>
</span><span class="code-line">rs<span class="token punctuation">.</span><span class="token function property-access method">slaveOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">#查看集群状态
</span><span class="code-line">rs<span class="token punctuation">.</span><span class="token function property-access method">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token property string-property">&quot;set&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;replset0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;date&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:29.436Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;myState&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;term&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;syncingTo&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.100:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;syncSourceHost&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.100:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;syncSourceId&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;heartbeatIntervalMillis&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;majorityVoteCount&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;writeMajorityCount&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;optimes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token property string-property">&quot;lastCommittedOpTime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;lastCommittedWallTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26.390Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;readConcernMajorityOpTime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;readConcernMajorityWallTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26.390Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;appliedOpTime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;durableOpTime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;lastAppliedWallTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26.390Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;lastDurableWallTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26.390Z&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;lastStableRecoveryTimestamp&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919836</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;lastStableCheckpointTimestamp&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919836</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;electionParticipantMetrics&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token property string-property">&quot;votedForCandidate&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;electionTerm&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;lastVoteDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:43:55.290Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;electionCandidateMemberId&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;voteReason&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;lastAppliedOpTimeAtElection&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919825</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;maxAppliedOpTimeInSet&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919825</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;priorityAtElection&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;newTermStartDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:43:56.388Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;newTermAppliedDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:43:57.251Z&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;members&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">                <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.100:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;health&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;stateStr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;PRIMARY&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;uptime&quot;</span> <span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDurable&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDurableDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeat&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:29.071Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeatRecv&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:29.373Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;pingMs&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeatMessage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncingTo&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncSourceHost&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncSourceId&quot;</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;infoMessage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;electionTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919835</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;electionDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:43:55Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;configVersion&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.101:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;health&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;stateStr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;SECONDARY&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;uptime&quot;</span> <span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDurable&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDurableDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeat&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:29.071Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeatRecv&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:27.877Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;pingMs&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeatMessage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncingTo&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.102:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncSourceHost&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.102:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncSourceId&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;infoMessage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;configVersion&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
</span><span class="code-line">                <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.102:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;health&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;stateStr&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;SECONDARY&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;uptime&quot;</span> <span class="token operator">:</span> <span class="token number">102</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;ts&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                                <span class="token property string-property">&quot;t&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line">                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;optimeDate&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">ISODate</span></span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-11T09:44:26Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncingTo&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.100:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncSourceHost&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;172.28.5.100:27017&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;syncSourceId&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;infoMessage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;configVersion&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;self&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;lastHeartbeatMessage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
</span><span class="code-line">                <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;ok&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;$clusterTime&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token property string-property">&quot;clusterTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token property string-property">&quot;signature&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;hash&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">BinData</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;2c8e97L8m8sn43vbxoTdttVR6PM=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">                        <span class="token property string-property">&quot;keyId&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">NumberLong</span></span><span class="token punctuation">(</span><span class="token string">&quot;6802883895105683458&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property string-property">&quot;operationTime&quot;</span> <span class="token operator">:</span> <span class="token function"><span class="token maybe-class-name">Timestamp</span></span><span class="token punctuation">(</span><span class="token number">1583919866</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">
</span></code></pre></div></li></ul><p>到这里通过 docker 搭建 mongo 集群的过程就全部完成了.</p><p>需要注意:</p><ul><li>初始化集群配置时,如果需要从非本地节点(localhost)连接集群.那么<code>config</code>中配置的 ip 地址必须是外网能够访问到的地址.</li></ul><h1 id="如何连接到集群"><a href="#如何连接到集群" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>如何连接到集群</h1><h4 id="通过-spring-data-mongodb-连接到集群的配置"><a href="#通过-spring-data-mongodb-连接到集群的配置" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>通过 spring data mongodb 连接到集群的配置</h4><ul><li>在<code>application-{环境}.yml</code>中配置连接用户名<code>root</code>,密码<code>123</code>,数据库名为<code>pay-platform</code>的复制集,配置如下:</li></ul><div class="relative"><pre><code class="code-highlight language-yml"><span class="code-line"><span class="token atrule key">mongodb</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">uri</span><span class="token punctuation">:</span> mongodb<span class="token punctuation">:</span>//root<span class="token punctuation">:</span>123@172.28.5.100<span class="token punctuation">:</span><span class="token number">47017</span><span class="token punctuation">,</span>172.28.5.101<span class="token punctuation">:</span><span class="token number">47018</span><span class="token punctuation">,</span>172.28.5.102<span class="token punctuation">:</span>47019/<span class="token punctuation">?</span>replicaSet=replset0
</span><span class="code-line">  <span class="token atrule key">database</span><span class="token punctuation">:</span> pay<span class="token punctuation">-</span>platform
</span></code></pre></div><h4 id="通过可视化工具连接到集群"><a href="#通过可视化工具连接到集群" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>通过可视化工具连接到集群</h4><p>建议只连接到主服务器即可,无需连接副本集,不影响常规读写操作.</p></div><div class="pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Ftailwind-nextjs-starter-blog.vercel.app%2Fblog%2F2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog/blob/main/data/blog/2020-03-11-搭建Mongodb集群.md">View on GitHub</a></div><div class="pb-6 pt-6 text-center text-gray-700 dark:text-gray-300" id="comment"><button>Load Comments</button></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/数据库">数据库</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/2020-03-01-警惕java数组协变特性导致的问题">警惕java数组协变特性导致的问题</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/2020-03-16-工作流引擎选型调研">工作流引擎选型调研</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Back to the blog" href="/blog">← Back to the blog</a></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:tiers@qq.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://blog.laizeh.com"><span class="sr-only">github</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>laizeh</div><div> • </div><div>© 2024</div><div> • </div><a href="/">akamiiya的程序员之路</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></section><script src="/_next/static/chunks/webpack-1df20324b005979d.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2d141e1a38819612-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/a6881ad4d2c479bd.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/c1c99bc127b9f571.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"5:I[7690,[],\"\"]\n8:I[5613,[],\"\"]\na:I[1778,[],\"\"]\nb:I[8029,[\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"449\",\"static/chunks/449-dbe3acf9b229b2b6.js\",\"185\",\"static/chunks/app/layout-223665e243f1bf19.js\"],\"ThemeProviders\"]\nc:I[5935,[\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"449\",\"static/chunks/449-dbe3acf9b229b2b6.js\",\"185\",\"static/chunks/app/layout-223665e243f1bf19.js\"],\"\"]\nd:I[8625,[\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"449\",\"static/chunks/449-dbe3acf9b229b2b6.js\",\"185\",\"static/chunks/app/lay"])</script><script>self.__next_f.push([1,"out-223665e243f1bf19.js\"],\"KBarSearchProvider\"]\ne:I[5250,[\"950\",\"static/chunks/5f069060-c93cfff76369d40c.js\",\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"749\",\"static/chunks/749-03187734929ca4f1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-8014ed172e446fa6.js\"],\"\"]\nf:I[8271,[\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"449\",\"static/chunks/449-dbe3acf9b229b2b6.js\",\"185\",\"static/chunks/app/layout-223665e243f1bf19.js\"],\"KBarButton\"]\n10:I[5021,[\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"449\",\"st"])</script><script>self.__next_f.push([1,"atic/chunks/449-dbe3acf9b229b2b6.js\",\"185\",\"static/chunks/app/layout-223665e243f1bf19.js\"],\"\"]\n11:I[6422,[\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"449\",\"static/chunks/449-dbe3acf9b229b2b6.js\",\"185\",\"static/chunks/app/layout-223665e243f1bf19.js\"],\"\"]\n13:I[8955,[],\"\"]\n9:[\"slug\",\"2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\",\"c\"]\n14:[]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a6881ad4d2c479bd.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"2wAuILjAjiAoNZ2SErs7i\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"2020-03-11-搭建Mongodb集群\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L6\",\"$L7\",null]]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c1c99bc127b9f571.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"html\",null,{\"lang\":\"zh-cn\",\"className\":\"__variable_587f35 scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/static/favicons/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/static/favicons/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/static/favicons/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/static/favicons/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/static/favicons/safari-pinned-tab.svg\",\"color\":\"#5bbad5\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"#fff\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}],[\"$\",\"body\",null,{\"className\":\"bg-white text-black antialiased dark:bg-gray-950 dark:text-white\",\"children\":[\"$\",\"$Lb\",null,{\"children\":[[\"$undefined\",\"$undefined\",\"$undefined\",[\"$\",\"$Lc\",null,{\"async\":true,\"defer\":true,\"data-website-id\":\"$undefined\",\"src\":\"https://analytics.umami.is/script.js\"}],\"$undefined\"],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-screen flex-col justify-between font-sans\",\"children\":[[\"$\",\"$Ld\",null,{\"kbarConfig\":{\"searchDocumentsPath\":\"search.json\"},\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-between py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$Le\",null,{\"href\":\"/\",\"aria-label\":\"akamiiya的程序员之路\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mr-3\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlnsXlink\":\"http://www.w3.org/1999/xlink\",\"width\":53.87,\"height\":43.61,\"viewBox\":\"344.564 330.278 111.737 91.218\",\"children\":[[\"$\",\"defs\",null,{\"children\":[[\"$\",\"linearGradient\",null,{\"id\":\"logo_svg__b\",\"x1\":420.97,\"x2\":420.97,\"y1\":331.28,\"y2\":418.5,\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":\"0%\",\"style\":{\"stopColor\":\"#06b6d4\",\"stopOpacity\":1}}],[\"$\",\"stop\",null,{\"offset\":\"100%\",\"style\":{\"stopColor\":\"#67e8f9\",\"stopOpacity\":1}}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"logo_svg__d\",\"x1\":377.89,\"x2\":377.89,\"y1\":331.28,\"y2\":418.5,\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":\"0%\",\"style\":{\"stopColor\":\"#06b6d4\",\"stopOpacity\":1}}],[\"$\",\"stop\",null,{\"offset\":\"100%\",\"style\":{\"stopColor\":\"#67e8f9\",\"stopOpacity\":1}}]]}],[\"$\",\"path\",null,{\"id\":\"logo_svg__a\",\"d\":\"M453.3 331.28v28.57l-64.66 58.65v-30.08z\"}],[\"$\",\"path\",null,{\"id\":\"logo_svg__c\",\"d\":\"M410.23 331.28v28.57l-64.67 58.65v-30.08z\"}]]}],[\"$\",\"use\",null,{\"xlinkHref\":\"#logo_svg__a\",\"fill\":\"url(#logo_svg__b)\"}],[\"$\",\"use\",null,{\"xlinkHref\":\"#logo_svg__c\",\"fill\":\"url(#logo_svg__d)\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":\"akamiiya的程序员之路\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-4 leading-5 sm:space-x-6\",\"children\":[[[\"$\",\"$Le\",null,{\"href\":\"/blog\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"博客\"}],[\"$\",\"$Le\",null,{\"href\":\"/projects\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"工具\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"标签\"}]],[\"$\",\"$Lf\",null,{\"aria-label\":\"Search\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"className\":\"h-6 w-6 text-gray-900 dark:text-gray-100\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"}]}]}],[\"$\",\"$L10\",null,{}],[\"$\",\"$L11\",null,{}]]}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pb-8 pt-6 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"Sorry we couldn't find this page.\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"But dont worry, you can find plenty of other things on our homepage.\"}],[\"$\",\"$Le\",null,{\"href\":\"/\",\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"Back to homepage\"}]]}]]}],\"notFoundStyles\":[],\"styles\":null}]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-3 flex space-x-4\",\"children\":[[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"mailto:tiers@qq.com\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"mail\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 20 20\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\"}],[\"$\",\"path\",null,{\"d\":\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\"}]]}]]}],[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://blog.laizeh.com\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"github\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"d\":\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"}]}]]}],null,null,null,null,null,null]}],[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"laizeh\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"div\",null,{\"children\":\"© 2024\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$Le\",null,{\"href\":\"/\",\"children\":\"akamiiya的程序员之路\"}]]}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-sm text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/timlrx/tailwind-nextjs-starter-blog\",\"children\":\"Tailwind Nextjs Theme\"}]}]]}]}]]}]}]]}]}]]}],null]],\"initialHead\":[false,\"$L12\"],\"globalErrorComponent\":\"$13\",\"missingSlots\":\"$W14\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[144,[\"950\",\"static/chunks/5f069060-c93cfff76369d40c.js\",\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"749\",\"static/chunks/749-03187734929ca4f1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-8014ed172e446fa6.js\"],\"\"]\n16:I[7738,[\"950\",\"static/chunks/5f069060-c93cfff76369d40c.js\",\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"749\",\"static/chunks/749-03187734929ca4f1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-8014ed172e446fa6.js\"],\"\"]\n17:I[3221,[\"950\",\"static/chunks/5f069060-c93cfff76369d4"])</script><script>self.__next_f.push([1,"0c.js\",\"250\",\"static/chunks/250-2c92a8b3297abe92.js\",\"749\",\"static/chunks/749-03187734929ca4f1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-8014ed172e446fa6.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"搭建Mongodb集群\\\",\\\"datePublished\\\":\\\"2020-03-11T00:00:00.000Z\\\",\\\"dateModified\\\":\\\"2020-03-11T00:00:00.000Z\\\",\\\"image\\\":\\\"/static/images/twitter-card.png\\\",\\\"url\\\":\\\"https://tailwind-nextjs-starter-blog.vercel.app/blog/2020-03-11-搭建Mongodb集群\\\",\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"Zhlai\\\"}]}\"}}],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L15\",null,{}],[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700\",\"children\":[[\"$\",\"header\",null,{\"className\":\"pt-6 xl:pb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-1 text-center\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"space-y-10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Published on\"}],[\"$\",\"dd\",null,{\"className\":\"text-base font-medium leading-6 text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2020-03-11T00:00:00.000Z\",\"children\":\"2020年3月11日星期三\"}]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14\",\"children\":\"搭建Mongodb集群\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Authors\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8\",\"children\":[[\"$\",\"li\",\"Zhlai\",{\"className\":\"flex items-center space-x-2\",\"children\":[\"$undefined\",[\"$\",\"dl\",null,{\"className\":\"whitespace-nowrap text-sm font-medium leading-5\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Name\"}],[\"$\",\"dd\",null,{\"className\":\"text-gray-900 dark:text-gray-100\",\"children\":\"Zhlai\"}],[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Twitter\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://twitter.com/Twitter\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"@Twitter\"}]}]]}]]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-none pb-8 pt-10 dark:prose-invert\",\"children\":[[\"$\",\"p\",null,{\"children\":\"之前尝试过用 docker 搭建单机版的 mongodb.但是.单机版的 mongo 有个问题,不支持事务.\"}],[\"$\",\"p\",null,{\"children\":\"目前 mongodb 4.0 已经支持副本集级别的事务了.\"}],[\"$\",\"p\",null,{\"children\":\"为了让测试环境的 Mongo 和生产环境的功能保持一致.我决定尝试使用 docker 搭建一个一主两从的高可用的 mongo 复制集.\"}],[\"$\",\"p\",null,{\"children\":\"在这里把搭建过程记录下来.\"}],[\"$\",\"h1\",null,{\"id\":\"搭建过程\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#搭建过程\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"搭建过程\"]}],[\"$\",\"h5\",null,{\"id\":\"使用-keyfile-的访问控制方式部署复制集\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#使用-keyfile-的访问控制方式部署复制集\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"使用 keyfile 的访问控制方式部署复制集\"]}],[\"$\",\"p\",null,{\"children\":\"keyfile 是 mongo 复制集 集群内部的一种认证机制.为了连接到复制集,成员需要对 keyfile 进行认证.\"}],[\"$\",\"p\",null,{\"children\":\"不使用验证也可以搭建集群~ 但是连带登录密码也不能使用,出于安全性考虑不推荐这么干.\"}],[\"$\",\"p\",null,{\"children\":[\"Keyfiles 是安全的最小格式,非常适合测试和开发环境。对于生产环境,官方推荐使用\",[\"$\",\"code\",null,{\"children\":\"x.509 certificates\"}],\".\"]}],[\"$\",\"h5\",null,{\"id\":\"生成-keyfile\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#生成-keyfile\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"生成 keyfile\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":\"生成 keyfile 并修改权限\"}]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"openssl rand \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-base64\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"756\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" ~/mongo-cluster/mongodbKeyfile.key\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"chmod\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"400\"}],\" ~/mongo-cluster/mongodbKeyfile.key\\n\"]}]]}]}],[\"$\",\"h5\",null,{\"id\":\"创建共有配置文件-mongodconf\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#创建共有配置文件-mongodconf\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"创建共有配置文件 mongod.conf\"]}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"生成\",[\"$\",\"code\",null,{\"children\":\"mongod.conf \"}],\"配置并修改权限\"]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"容器内部端口 27017,keyfile 路径为容器内\",[\"$\",\"code\",null,{\"children\":\"/data/configdb/mongodbKeyfile.key\"}],\",复制集名称为\",[\"$\",\"code\",null,{\"children\":\"replset0\"}]]}]}]]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"cat\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\"~/mongo-cluster/mongod.conf\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"EOF\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"net:\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  port: 27017\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  bindIp: 0.0.0.0\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  bindIpAll: true\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"systemLog:\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  logAppend: true\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"security:\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  keyFile: \\\"/data/configdb/mongodbKeyfile.key\\\"\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  authorization: \\\"enabled\\\"\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"setParameter:\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  enableLocalhostAuthBypass: true\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"replication:\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"  replSetName: \\\"replset0\\\"\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"EOF\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"chmod\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"400\"}],\" ~/mongo-cluster/mongod.conf\\n\"]}]]}]}],[\"$\",\"h5\",null,{\"id\":\"创建自定义网络\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#创建自定义网络\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"创建自定义网络\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[\"创建名为\",[\"$\",\"code\",null,{\"children\":\"mongo-network\"}],\"的自定义网络,用于部署 docker 集群\"]}]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"docker\"}],\" network create \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--driver\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"bridge \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--subnet\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"172.28\"}],\".0.0/16 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  --ip-range\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"172.28\"}],\".5.0/24 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--gateway\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"172.28\"}],\".5.254 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  mongo-network\\n\"}]]}]}],[\"$\",\"h5\",null,{\"id\":\"启动副本集容器\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#启动副本集容器\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"启动副本集容器\"]}],[\"$\",\"h6\",null,{\"id\":\"启动主服务器\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#启动主服务器\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"启动主服务器\"]}],[\"$\",\"p\",null,{\"children\":\"命令解释 :\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"创建了名为\",[\"$\",\"code\",null,{\"children\":\"m0\"}],\"的 docker 容器,并且把容器端口\",[\"$\",\"code\",null,{\"children\":\"27107\"}],\"映射到宿主机\",[\"$\",\"code\",null,{\"children\":\"47107\"}]]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"加入自定义网络\",[\"$\",\"code\",null,{\"children\":\"mongo-network\"}],\",并且绑定 ip\",[\"$\",\"code\",null,{\"children\":\"172.28.5.100\"}]]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"挂载数据卷,将宿主的\",[\"$\",\"code\",null,{\"children\":\"~/mongo-cluster/data0\"}],\",\",[\"$\",\"code\",null,{\"children\":\"mongod.conf\"}],\"和\",[\"$\",\"code\",null,{\"children\":\"mongodbKeyfile.key\"}],\"挂载到容器内部.\"]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":[\"创建用户名=\",[\"$\",\"code\",null,{\"children\":\"root\"}],\",密码=\",[\"$\",\"code\",null,{\"children\":\"123\"}],\"的管理员.然后为 mongo 启用权限控制.\"]}]}]]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"docker\"}],\" run \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--name\"}],\" m0 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-p\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"47017\"}],\":27017 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--network\"}],\" mongo-network \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--ip\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"172.28\"}],\".5.100 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/data0:/data/db \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/mongod.conf:/data/configdb/mongod.conf \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/mongodbKeyfile.key:/data/configdb/mongodbKeyfile.key \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-d\"}],\" mongo \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-c\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":[\"\\\"mongod --fork --syslog \u0026\u0026mongo admin --eval \",[\"$\",\"span\",null,{\"className\":\"token entity\",\"title\":\"\\\\\\\"\",\"children\":\"\\\\\\\"\"}],\"db.createUser({user: 'root', pwd: '123', roles: [{ role: 'root', db: 'admin' }]})\",[\"$\",\"span\",null,{\"className\":\"token entity\",\"title\":\"\\\\\\\"\",\"children\":\"\\\\\\\"\"}],\" \u0026\u0026 mongod --shutdown \u0026\u0026 mongod --auth -f /data/configdb/mongod.conf \\\"\"]}],\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}]]}]}],[\"$\",\"h6\",null,{\"id\":\"启动复制集-1\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#启动复制集-1\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"启动复制集 1\"]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"docker\"}],\" run \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--name\"}],\" m1 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-p\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"47018\"}],\":27017 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--network\"}],\" mongo-network \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--ip\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"172.28\"}],\".5.101 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/data1:/data/db \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/mongod.conf:/data/configdb/mongod.conf \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/mongodbKeyfile.key:/data/configdb/mongodbKeyfile.key \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-d\"}],\" mongo \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-c\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":[\"\\\"mongod --fork --syslog \u0026\u0026mongo admin --eval \",[\"$\",\"span\",null,{\"className\":\"token entity\",\"title\":\"\\\\\\\"\",\"children\":\"\\\\\\\"\"}],\"db.createUser({user: 'root', pwd: '123', roles: [{ role: 'root', db: 'admin' }]})\",[\"$\",\"span\",null,{\"className\":\"token entity\",\"title\":\"\\\\\\\"\",\"children\":\"\\\\\\\"\"}],\" \u0026\u0026 mongod --shutdown \u0026\u0026 mongod --auth -f /data/configdb/mongod.conf \\\"\"]}],\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}]]}]}],[\"$\",\"h6\",null,{\"id\":\"启动复制集-2\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#启动复制集-2\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"启动复制集 2\"]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"docker\"}],\" run \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--name\"}],\" m2 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-p\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"47019\"}],\":27017 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--network\"}],\" mongo-network \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--ip\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"172.28\"}],\".5.102 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/data2:/data/db \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/mongod.conf:/data/configdb/mongod.conf \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-v\"}],\" ~/mongo-cluster/mongodbKeyfile.key:/data/configdb/mongodbKeyfile.key \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-d\"}],\" mongo \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sh\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-c\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":[\"\\\"mongod --fork --syslog \u0026\u0026mongo admin --eval \",[\"$\",\"span\",null,{\"className\":\"token entity\",\"title\":\"\\\\\\\"\",\"children\":\"\\\\\\\"\"}],\"db.createUser({user: 'root', pwd: '123', roles: [{ role: 'root', db: 'admin' }]})\",[\"$\",\"span\",null,{\"className\":\"token entity\",\"title\":\"\\\\\\\"\",\"children\":\"\\\\\\\"\"}],\" \u0026\u0026 mongod --shutdown \u0026\u0026 mongod --auth -f /data/configdb/mongod.conf \\\"\"]}],\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\\\\\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\"这里有两个需要注意的点:\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"p\",null,{\"children\":\"副本集服务器的管理员密码一定要和主服务器保持一致.否则会出现认证失败.\"}]}],[\"$\",\"li\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":[\"端口映射命令\",[\"$\",\"code\",null,{\"children\":\"-p 47019:27017\"}],\"会绕过操作系统防火墙直接通过 iptables 开放端口.这是一个很大的坑.\"]}],[\"$\",\"p\",null,{\"children\":[\"如果只在本机访问可以用命令\",[\"$\",\"code\",null,{\"children\":\"-p 127.0.0.1:47019:27017\"}],\"代替.\"]}]]}]]}],[\"$\",\"h5\",null,{\"id\":\"初始化集群\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#初始化集群\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"初始化集群\"]}],[\"$\",\"h6\",null,{\"id\":\"主服务器\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#主服务器\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"主服务器\"]}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":[\"通过 Mongo shell 登录\",[\"$\",\"code\",null,{\"children\":\"admin\"}],\"库\"]}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"docker\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"exec\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-it\"}],\" m0 mongo admin\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"#使用启动容器时设定的账号密码进行认证\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db.auth\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"root\\\"\"}],\",\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"123\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"#认证成功\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"\\n\"]}]]}]}]]}],[\"$\",\"li\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":\"初始化集群配置\"}],[\"$\",\"$L16\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"config \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" _id:\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"replset0\\\"\"}],\", members:\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"_id:0,host:\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.100:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\",\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"_id:1,host:\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.101:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\",\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"_id:2,host:\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.102:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"rs.initiate\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"config\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"#初始化成功\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"ok\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}]]}]}]]}]]}],[\"$\",\"h6\",null,{\"id\":\"复制集服务器\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#复制集服务器\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"复制集服务器\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":\"退出主服务器,登录复制集服务器,进行初始化操作\"}],[\"$\",\"$L16\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-js\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"#初始化复制集\",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"docker exec \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"it m1 mongo admin\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"#使用启动容器时设定的账号密码进行认证\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function property-access method\",\"children\":\"auth\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"root\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"123\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"#认证成功\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"#默认情况下复制集是不允许访问的\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"开启访问功能\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"rs\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function property-access method\",\"children\":\"slaveOk\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"#退出复制集\",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"#初始化复制集\",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"docker exec \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"it m2 mongo admin\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"#使用启动容器时设定的账号密码进行认证\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function property-access method\",\"children\":\"auth\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"root\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"123\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"#认证成功\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"#默认情况下复制集是不允许访问的\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token property-access\",\"children\":\"开启访问功能\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"rs\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function property-access method\",\"children\":\"slaveOk\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"#查看集群状态\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"rs\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function property-access method\",\"children\":\"status\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"set\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"replset0\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"date\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:29.436Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"myState\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"term\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncingTo\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.100:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceHost\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.100:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceId\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"heartbeatIntervalMillis\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2000\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"majorityVoteCount\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"writeMajorityCount\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimes\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastCommittedOpTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastCommittedWallTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26.390Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"readConcernMajorityOpTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"readConcernMajorityWallTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26.390Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"appliedOpTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"durableOpTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastAppliedWallTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26.390Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastDurableWallTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26.390Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastStableRecoveryTimestamp\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919836\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"4\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastStableCheckpointTimestamp\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919836\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"4\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"electionParticipantMetrics\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"votedForCandidate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"electionTerm\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastVoteDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:43:55.290Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"electionCandidateMemberId\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"voteReason\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastAppliedOpTimeAtElection\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919825\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"maxAppliedOpTimeInSet\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919825\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"priorityAtElection\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"newTermStartDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:43:56.388Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"newTermAppliedDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:43:57.251Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"members\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"_id\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"name\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.100:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"health\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"state\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"stateStr\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"PRIMARY\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"uptime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"43\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDurable\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDurableDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeat\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:29.071Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeatRecv\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:29.373Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"pingMs\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeatMessage\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncingTo\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceHost\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceId\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"infoMessage\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"electionTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919835\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"electionDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:43:55Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"configVersion\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"_id\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"name\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.101:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"health\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"state\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"stateStr\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"SECONDARY\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"uptime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"43\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDurable\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDurableDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeat\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:29.071Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeatRecv\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:27.877Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"pingMs\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeatMessage\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncingTo\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.102:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceHost\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.102:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceId\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"infoMessage\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"configVersion\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"_id\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"name\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.102:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"health\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"state\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"stateStr\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"SECONDARY\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"uptime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"102\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ts\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"t\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"optimeDate\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"ISODate\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2020-03-11T09:44:26Z\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncingTo\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.100:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceHost\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"172.28.5.100:27017\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"syncSourceId\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"infoMessage\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"configVersion\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"self\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"lastHeartbeatMessage\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"ok\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"$clusterTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"clusterTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"signature\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"hash\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"BinData\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"2c8e97L8m8sn43vbxoTdttVR6PM=\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"keyId\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NumberLong\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"6802883895105683458\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token property string-property\",\"children\":\"\\\"operationTime\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Timestamp\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1583919866\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}]]}]}]]}]}],[\"$\",\"p\",null,{\"children\":\"到这里通过 docker 搭建 mongo 集群的过程就全部完成了.\"}],[\"$\",\"p\",null,{\"children\":\"需要注意:\"}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[\"初始化集群配置时,如果需要从非本地节点(localhost)连接集群.那么\",[\"$\",\"code\",null,{\"children\":\"config\"}],\"中配置的 ip 地址必须是外网能够访问到的地址.\"]}]}],[\"$\",\"h1\",null,{\"id\":\"如何连接到集群\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#如何连接到集群\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"如何连接到集群\"]}],[\"$\",\"h4\",null,{\"id\":\"通过-spring-data-mongodb-连接到集群的配置\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#通过-spring-data-mongodb-连接到集群的配置\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"通过 spring data mongodb 连接到集群的配置\"]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[\"在\",[\"$\",\"code\",null,{\"children\":\"application-{环境}.yml\"}],\"中配置连接用户名\",[\"$\",\"code\",null,{\"children\":\"root\"}],\",密码\",[\"$\",\"code\",null,{\"children\":\"123\"}],\",数据库名为\",[\"$\",\"code\",null,{\"children\":\"pay-platform\"}],\"的复制集,配置如下:\"]}]}],[\"$\",\"$L16\",null,{\"className\":\"language-yml\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-yml\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token atrule key\",\"children\":\"mongodb\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token atrule key\",\"children\":\"uri\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" mongodb\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"//root\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"123@172.28.5.100\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"47017\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"172.28.5.101\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"47018\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"172.28.5.102\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"47019/\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"?\"}],\"replicaSet=replset0\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token atrule key\",\"children\":\"database\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" pay\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"platform\\n\"]}]]}]}],[\"$\",\"h4\",null,{\"id\":\"通过可视化工具连接到集群\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#通过可视化工具连接到集群\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"通过可视化工具连接到集群\"]}],[\"$\",\"p\",null,{\"children\":\"建议只连接到主服务器即可,无需连接副本集,不影响常规读写操作.\"}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300\",\"children\":[[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"nofollow\",\"href\":\"https://mobile.twitter.com/search?q=https%3A%2F%2Ftailwind-nextjs-starter-blog.vercel.app%2Fblog%2F2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\",\"children\":\"Discuss on Twitter\"}],\" • \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/timlrx/tailwind-nextjs-starter-blog/blob/main/data/blog/2020-03-11-搭建Mongodb集群.md\",\"children\":\"View on GitHub\"}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300\",\"id\":\"comment\",\"children\":[\"$\",\"$L17\",null,{\"slug\":\"2020-03-11-搭建Mongodb集群\"}]}]]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y\",\"children\":[[\"$\",\"div\",null,{\"className\":\"py-4 xl:py-8\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Tags\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap\",\"children\":[[\"$\",\"$Le\",null,{\"href\":\"/tags/数据库\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"数据库\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Previous Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog/2020-03-01-警惕java数组协变特性导致的问题\",\"children\":\"警惕java数组协变特性导致的问题\"}]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Next Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog/2020-03-16-工作流引擎选型调研\",\"children\":\"工作流引擎选型调研\"}]}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"pt-4 xl:pt-8\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"aria-label\":\"Back to the blog\",\"children\":\"← Back to the blog\"}]}]]}]]}]]}]}]]}]]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"搭建Mongodb集群 | akamiiya的程序员之路\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"5\",{\"rel\":\"canonical\",\"href\":\"https://tailwind-nextjs-starter-blog.vercel.app/blog/2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\"}],[\"$\",\"link\",\"6\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://tailwind-nextjs-starter-blog.vercel.app/feed.xml\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:title\",\"content\":\"搭建Mongodb集群\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://tailwind-nextjs-starter-blog.vercel.app/blog/2020-03-11-%E6%90%AD%E5%BB%BAMongodb%E9%9B%86%E7%BE%A4\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"akamiiya的程序员之路\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image\",\"content\":\"https://tailwind-nextjs-starter-blog.vercel.app/static/images/twitter-card.png\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"13\",{\"property\":\"article:published_time\",\"content\":\"2020-03-11T00:00:00.000Z\"}],[\"$\",\"meta\",\"14\",{\"property\":\"article:modified_time\",\"content\":\"2020-03-11T00:00:00.000Z\"}],[\"$\",\"meta\",\"15\",{\"property\":\"article:author\",\"content\":\"Zhlai\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:title\",\"content\":\"搭建Mongodb集群\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image\",\"content\":\"https://tailwind-nextjs-starter-blog.vercel.app/static/images/twitter-card.png\"}],[\"$\",\"meta\",\"19\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"6:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>